import{i,m as k,a as u,d as e,g as m,j as x,k as v,v as f,t as b,q as w,l as B,o as d}from"./index-BTz1ItL8.js";import{p as _}from"./posts-CLrKG3zp.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";const V={class:"post-edit"},q={key:0,class:"loading"},D={class:"form-group"},E={class:"form-group"},M={key:0,class:"error-message"},S={class:"form-actions"},C=["disabled"],I={__name:"PostEdit",setup(N){const p=B(),n=w(),s=i({title:"",content:""}),c=i(!1),r=i(!1),o=i(""),y=async()=>{c.value=!0;try{const a=await _.getDetail(n.params.id);s.value.title=a.data.title,s.value.content=a.data.content}catch{o.value="게시글을 불러오는데 실패했습니다."}finally{c.value=!1}},g=async()=>{var a,t;r.value=!0,o.value="";try{await _.update(n.params.id,s.value),p.push(`/posts/${n.params.id}`)}catch(l){o.value=((t=(a=l.response)==null?void 0:a.data)==null?void 0:t.message)||"게시글 수정에 실패했습니다."}finally{r.value=!1}},h=()=>{p.push(`/posts/${n.params.id}`)};return k(()=>{y()}),(a,t)=>(d(),u("div",V,[t[4]||(t[4]=e("h2",null,"게시글 수정",-1)),c.value?(d(),u("div",q,"로딩 중...")):s.value.title?(d(),u("form",{key:1,onSubmit:x(g,["prevent"])},[e("div",D,[t[2]||(t[2]=e("label",{for:"title"},"제목",-1)),v(e("input",{type:"text",id:"title","onUpdate:modelValue":t[0]||(t[0]=l=>s.value.title=l),required:"",maxlength:"200",placeholder:"제목을 입력하세요"},null,512),[[f,s.value.title]])]),e("div",E,[t[3]||(t[3]=e("label",{for:"content"},"내용",-1)),v(e("textarea",{id:"content","onUpdate:modelValue":t[1]||(t[1]=l=>s.value.content=l),required:"",rows:"15",placeholder:"내용을 입력하세요"},null,512),[[f,s.value.content]])]),o.value?(d(),u("div",M,b(o.value),1)):m("",!0),e("div",S,[e("button",{type:"submit",class:"btn btn-primary",disabled:r.value},b(r.value?"수정 중...":"수정하기"),9,C),e("button",{type:"button",onClick:h,class:"btn btn-secondary"}," 취소 ")])],32)):m("",!0)]))}},j=P(I,[["__scopeId","data-v-beb95b9a"]]);export{j as default};
