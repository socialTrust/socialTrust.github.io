import{i as n,a as u,d as e,g as b,k as d,v as c,t as p,j as g,l as y,o as m}from"./index-CxMTdPvu.js";import{u as h}from"./posts-DEk91uF9.js";import{_ as x}from"./_plugin-vue_export-helper-DlAUqK2U.js";const k={class:"post-create"},w={class:"form-group"},P={class:"form-group"},S={key:0,class:"error-message"},B={class:"form-actions"},C=["disabled"],V={__name:"PostCreate",setup(q){const i=y(),v=h(),s=n({title:"",content:""}),a=n(!1),l=n(""),f=async()=>{var r,t;a.value=!0,l.value="";try{const o=await v.createPost(s.value);console.log("✅ 게시글 생성 완료, 리스트 캐시 무효화됨"),i.push(`/posts/${o.id}`)}catch(o){l.value=((t=(r=o.response)==null?void 0:r.data)==null?void 0:t.message)||"게시글 작성에 실패했습니다."}finally{a.value=!1}},_=()=>{i.push("/posts")};return(r,t)=>(m(),u("div",k,[t[4]||(t[4]=e("h2",null,"게시글 작성",-1)),e("form",{onSubmit:g(f,["prevent"])},[e("div",w,[t[2]||(t[2]=e("label",{for:"title"},"제목",-1)),d(e("input",{type:"text",id:"title","onUpdate:modelValue":t[0]||(t[0]=o=>s.value.title=o),required:"",maxlength:"200",placeholder:"제목을 입력하세요"},null,512),[[c,s.value.title]])]),e("div",P,[t[3]||(t[3]=e("label",{for:"content"},"내용",-1)),d(e("textarea",{id:"content","onUpdate:modelValue":t[1]||(t[1]=o=>s.value.content=o),required:"",rows:"15",placeholder:"내용을 입력하세요"},null,512),[[c,s.value.content]])]),l.value?(m(),u("div",S,p(l.value),1)):b("",!0),e("div",B,[e("button",{type:"submit",class:"btn btn-primary",disabled:a.value},p(a.value?"작성 중...":"작성하기"),9,C),e("button",{type:"button",onClick:_,class:"btn btn-secondary"}," 취소 ")])],32)]))}},U=x(V,[["__scopeId","data-v-3ea667d3"]]);export{U as default};
