import{u as P,i as u,c as C,m as x,a as l,d as t,f as L,g as _,w as A,h,t as a,F as B,n as D,r as S,l as $,o as n}from"./index-DrWYcUKa.js";import{p as N}from"./posts-COGdu68B.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";const V={class:"post-list"},F={class:"header"},I={key:0,class:"loading"},R={key:1,class:"error"},E={key:2},K={class:"posts-table"},M=["onClick"],j={class:"title"},q={key:0,class:"comment-count"},z={key:0,class:"pagination"},G=["disabled"],H={class:"page-info"},J=["disabled"],O={__name:"PostList",setup(Q){const g=$(),k=P(),v=u([]),r=u(null),i=u(1),d=u(!1),c=u(""),f=C(()=>k.isAuthenticated),m=async()=>{d.value=!0,c.value="";try{const o=await N.getList(i.value);v.value=o.data.posts,r.value=o.data.pagination}catch{c.value="게시글을 불러오는데 실패했습니다."}finally{d.value=!1}},y=o=>{g.push(`/posts/${o}`)},p=o=>{i.value=o,m(),window.scrollTo(0,0)},b=o=>new Date(o).toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit"});return x(()=>{m()}),(o,e)=>{const w=S("router-link");return n(),l("div",V,[t("div",F,[e[3]||(e[3]=t("h2",null,"게시판",-1)),f.value?(n(),L(w,{key:0,to:"/posts/create",class:"btn btn-primary"},{default:A(()=>[...e[2]||(e[2]=[h("글쓰기",-1)])]),_:1})):_("",!0)]),d.value?(n(),l("div",I,"로딩 중...")):c.value?(n(),l("div",R,a(c.value),1)):(n(),l("div",E,[t("table",K,[e[4]||(e[4]=t("thead",null,[t("tr",null,[t("th",null,"번호"),t("th",null,"제목"),t("th",null,"작성자"),t("th",null,"조회수"),t("th",null,"작성일")])],-1)),t("tbody",null,[(n(!0),l(B,null,D(v.value,s=>(n(),l("tr",{key:s.id,onClick:U=>y(s.id),class:"post-row"},[t("td",null,a(s.id),1),t("td",j,[h(a(s.title)+" ",1),s.comment_count>0?(n(),l("span",q,"["+a(s.comment_count)+"]",1)):_("",!0)]),t("td",null,a(s.username),1),t("td",null,a(s.view_count),1),t("td",null,a(b(s.created_at)),1)],8,M))),128))])]),r.value?(n(),l("div",z,[t("button",{onClick:e[0]||(e[0]=s=>p(i.value-1)),disabled:i.value===1,class:"btn-page"}," 이전 ",8,G),t("span",H,a(i.value)+" / "+a(r.value.totalPages),1),t("button",{onClick:e[1]||(e[1]=s=>p(i.value+1)),disabled:i.value===r.value.totalPages,class:"btn-page"}," 다음 ",8,J)])):_("",!0)]))])}}},Z=T(O,[["__scopeId","data-v-9fa39e15"]]);export{Z as default};
