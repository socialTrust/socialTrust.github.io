import{i as r,a as s,d as e,g as _,k as C,v as S,s as D,t as l,h as g,F as K,n as T,l as V,o}from"./index-DrWYcUKa.js";import{p as $}from"./posts-COGdu68B.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";const N={class:"search-page"},F={class:"search-box"},I={key:0,class:"loading"},L={key:1,class:"error"},R={key:2},A={class:"search-info"},E={key:0},M={key:1},U={key:0,class:"posts-table"},j=["onClick"],q={class:"title"},z={key:0,class:"comment-count"},G={key:1,class:"pagination"},H=["disabled"],J={class:"page-info"},O=["disabled"],Q={__name:"SearchPage",setup(W){const w=V(),c=r(""),h=r(""),d=r([]),i=r(null),u=r(1),p=r(!1),v=r(""),m=r(!1),y=async()=>{if(!c.value.trim()){alert("검색어를 입력하세요.");return}u.value=1,h.value=c.value,await k()},k=async()=>{p.value=!0,v.value="",m.value=!0;try{const n=await $.search(h.value,u.value);d.value=n.data.posts,i.value=n.data.pagination}catch{v.value="검색에 실패했습니다."}finally{p.value=!1}},P=n=>{w.push(`/posts/${n}`)},b=n=>{u.value=n,k(),window.scrollTo(0,0)},x=n=>new Date(n).toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit"});return(n,t)=>{var f;return o(),s("div",N,[t[5]||(t[5]=e("h2",null,"게시글 검색",-1)),e("div",F,[C(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=a=>c.value=a),onKeyup:D(y,["enter"]),placeholder:"검색어를 입력하세요"},null,544),[[S,c.value]]),e("button",{onClick:y,class:"btn btn-primary"},"검색")]),p.value?(o(),s("div",I,"검색 중...")):v.value?(o(),s("div",L,l(v.value),1)):m.value?(o(),s("div",R,[e("div",A,[d.value.length>0?(o(),s("p",E,[t[3]||(t[3]=g(' "',-1)),e("strong",null,l(h.value),1),g('" 검색 결과: '+l((f=i.value)==null?void 0:f.totalPosts)+"건 ",1)])):(o(),s("p",M,"검색 결과가 없습니다."))]),d.value.length>0?(o(),s("table",U,[t[4]||(t[4]=e("thead",null,[e("tr",null,[e("th",null,"번호"),e("th",null,"제목"),e("th",null,"작성자"),e("th",null,"조회수"),e("th",null,"작성일")])],-1)),e("tbody",null,[(o(!0),s(K,null,T(d.value,a=>(o(),s("tr",{key:a.id,onClick:X=>P(a.id),class:"post-row"},[e("td",null,l(a.id),1),e("td",q,[g(l(a.title)+" ",1),a.comment_count>0?(o(),s("span",z,"["+l(a.comment_count)+"]",1)):_("",!0)]),e("td",null,l(a.username),1),e("td",null,l(a.view_count),1),e("td",null,l(x(a.created_at)),1)],8,j))),128))])])):_("",!0),i.value&&i.value.totalPages>1?(o(),s("div",G,[e("button",{onClick:t[1]||(t[1]=a=>b(u.value-1)),disabled:u.value===1,class:"btn-page"}," 이전 ",8,H),e("span",J,l(u.value)+" / "+l(i.value.totalPages),1),e("button",{onClick:t[2]||(t[2]=a=>b(u.value+1)),disabled:u.value===i.value.totalPages,class:"btn-page"}," 다음 ",8,O)])):_("",!0)])):_("",!0)])}}},te=B(Q,[["__scopeId","data-v-eb43b9f5"]]);export{te as default};
